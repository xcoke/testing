<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Xcoke's Testing Site</title>
</head>

<body>
  <script type="text/javascript" src="shake.js">
  function requestOrientationPermission() {
    DeviceOrientationEvent.requestPermission()
      .then(response => {
        if (response == 'granted') {
          // window.addEventListener('deviceorientation', (e) => {
          //     // do something with e
          // })

          // listen to shake event
          var shakeEvent = new Shake({
            threshold: 15
          });
          shakeEvent.start();
          window.addEventListener('shake', function() {
            alert("Shaked");
          }, false);

          //stop listening
          function stopShake() {
            shakeEvent.stop();
          }

          //check if shake is supported or not.
          if (!("ondevicemotion" in window)) {
            alert("Not Supported");
          }
        }
      })
      .catch(console.error)
  }
</script>

<button onclick='requestOrientationPermission();'>Request orientation permission</button>

</body>

</html>
