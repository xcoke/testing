<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>Xcoke's Testing</title>
  <script type="text/javascript" src="shake.js"></script>
</head>
<body>
  <script type="text/javascript">
    function requestOrientationPermission() {
      DeviceOrientationEvent.requestPermission()
        .then(response => {
          if (response == 'granted') {
            //create a new instance of shake.js.
            var myShakeEvent = new Shake({
              threshold: 15,
              timeout: 1500 
            });

            // start listening to device motion
            myShakeEvent.start();

            // register a shake event
            window.addEventListener('shake', shakeEventDidOccur, false);

            //shake event callback
            function shakeEventDidOccur() {
              alert('Shake!');
            }

            //stop listening
            function stopShake() {
              shakeEvent.stop();
            }

            //check if shake is supported or not.
            if (!("ondevicemotion" in window)) {
              alert("Not Supported");
            }
          } else {
            alert("no permission");
          }
        })
        .catch(console.error)
    }
  </script>

  <button onclick='requestOrientationPermission();'>Request permission</button>
</body>

</html>
