<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Testing</title>
  <script type="text/javascript" src="shake.js"></script>
</head>

<body>
  <script type="text/javascript">
    function shakeEventDidOccur() {
      alert('Shake !');
    }

    function initShake() {
      var shakeEvent = new Shake({
        threshold: 15,
        timeout: 1500
      });
      shakeEvent.start();
      window.addEventListener('shake', shakeEventDidOccur, false);
    }

    function requestPermission() {
      DeviceOrientationEvent.requestPermission()
        .then(response => {
          if (response == 'granted') {
            initShake();
          } else {
            alert("no permission");
          }
        })
        .catch(console.error)
    }

    window.onload = function() {
      if (typeof DeviceMotionEvent.requestPermission === 'function') {
        requestPermission();
      } else {
        initShake();
      }
    };
  </script>
</body>

</html>
