<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Xcoke's Testing Site</title>
  <script type="text/javascript" src="shake.js"></script>
</head>

<body>
  <!-- <script type="text/javascript" src="shake.js"> -->

  <script type="text/javascript">
    function requestOrientationPermission() {
      DeviceOrientationEvent.requestPermission()
        //DeviceMotionEvent.requestPermission()
        .then(response => {
          if (response == 'granted') {
            // window.addEventListener('deviceorientation', (e) => {
            //     // do something with e
            // })

            alert("granted");
            //create a new instance of shake.js.
            var myShakeEvent = new Shake({
              threshold: 15
            });

            // start listening to device motion
            myShakeEvent.start();

            // register a shake event
            window.addEventListener('shake', shakeEventDidOccur, false);

            //shake event callback
            function shakeEventDidOccur() {

              //put your own code here etc.
              alert('Shake!');
            }

            //stop listening
            // function stopShake() {
            //   shakeEvent.stop();
            // }

            //check if shake is supported or not.
            if (!("ondevicemotion" in window)) {
              alert("Not Supported");
            }
          } else {
            alert("not granted");
          }
        })
        .catch(console.error)
    }
  </script>

  <button onclick='requestOrientationPermission();'>Request orientation permission</button>

</body>

</html>
